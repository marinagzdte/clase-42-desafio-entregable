<script src="./../js/main.js"></script>
<div>
    <form action="/logout" method="get">
        <div>
            <h1 style="display: inline; font-size: xx-large;">Bienvenido {{name}} </h1>
            <p>Correo electrónico: {{username}}</p>
        </div>
        <button type="submit" class="btn btn-primary">Logout</button>
    </form>
</div>

<div>
    <h4>Ingrese un producto</h4>
    <form name="product-form" onsubmit="addProduct(this); resetForm(); return false;">
        <div class="form-group mb-3">
            <label class="form-label">Nombre</label>
            <input id="product-title" type="text" class="form-control" name="title" placeholder="Nombre del producto">
        </div>
        <div class="form-group mb-3">
            <label class="form-label">Precio</label>
            <input id="product-price" type="text" class="form-control" name="price" placeholder="Precio del producto">
        </div>
        <div class="form-group mb-3">
            <label class="form-label">URL foto</label>
            <input id="product-thumbnail" type="url" class="form-control" name="thumbnail" placeholder="URL de la foto">
        </div>
        <div class="button-div">
            <button type="submit" class="btn btn-primary" disabled="disabled">Cargar producto</button>
        </div>
        <div id="product-div"></div>
    </form>
</div>
<br>
<div>
    <h4>Mensajes</h4>
    <form name="chat-form" onsubmit="sendChatMessage(this); resetChatBox(); return false;">
        <div class="form-group mb-3">
            <input id="id" type="text" class="form-control" name="id" placeholder="Ingrese su correo electrónico">
        </div>
        <div class="form-group mb-3">
            <input id="name" type="text" class="form-control" name="name" placeholder="Ingrese su nombre">
        </div>
        <div class="form-group mb-3">
            <input id="lastName" type="text" class="form-control" name="lastName" placeholder="Ingrese su apellido">
        </div>
        <div class="form-group mb-3">
            <input id="age" type="number" class="form-control" name="age" placeholder="Ingrese su edad">
        </div>
        <div class="form-group mb-3">
            <input id="alias" type="text" class="form-control" name="alias" placeholder="Ingrese su alias">
        </div>
        <div class="form-group mb-3">
            <input id="avatar" type="url" class="form-control" name="avatar" placeholder="Ingrese la url de su avatar">
        </div>
        <br>
        <div class="form-group mb-3">
            <input id="text" type="text" class="form-control" name="text" placeholder="Escriba su mensaje">
        </div>
        <div class="button-div">
            <button type="submit" class="btn btn-primary" disabled="disabled">Enviar</button>
        </div>
    </form>
    <br>
    <div id="chat-div"></div>
</div>
<script>
    document.onkeyup = (e) => {
        if (e.target.tagName === 'INPUT') {
            const canSubmitProduct = [...document.forms['product-form'].querySelectorAll('input[type="text"],input[type="url"]')]
                .every(i => {
                    return i.value
                })
            document.forms['product-form'].querySelector('button[type="submit"]').disabled = !canSubmitProduct;

            const canSubmitMessage = [...document.forms['chat-form'].querySelectorAll('input[type="text"]')]
                .every(i => {
                    return i.value
                })
            document.forms['chat-form'].querySelector('button[type="submit"]').disabled = !canSubmitMessage
        }
    }
</script>